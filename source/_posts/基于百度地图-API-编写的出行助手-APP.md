---
title: 基于百度地图 API 编写的出行助手 APP
date: 2017-02-09 22:11:40
tags: [地图]
category: [Android]
---
前几天接了个同济那边实验室的私活，写 Android APP 挣外快。这次的 APP 开发也让我接触到了很多以前没接触过的领域，感觉收益颇丰，特别是对方评价我的代码‘很专业’的时候，心里美滋滋，嘿嘿。
<!--more-->
## 导航
百度地图的 API 提供了两个点之间的[骑行，步行，驾车，公共交通]路线规划，所需要做的就是获取起点和终点的经纬度(latitude，longitude)并调用对应的接口函数，会返回结构化的路线规划。之后再将路线绘制在地图上即可。实时的语音播报导航只支持驾车，所以只能退而求其次，进行不断地定位，并测试与关键点之间的距离来进行提示。当然，也就无法做到那种‘前方路口左转’这种细致的导航了。
## 搜索地点
因为我们在实际使用中，不可能通过输入起终点的经纬度来进行路径搜索，所以我们需要将使用者输入的文字地点转化为对应的经纬度才能发起对路径的搜索。而百度地图的 map(文字，经纬度) 显然只能对应准确的文字地点，所以我们需要调用他的文字模糊搜索，首先将使用者‘不是很精确’的文字描述转化为‘精确的’文字描述，再转化为经纬度。第一步的转化通过直接进行搜索，然后填充 AutocompleteTextView 来建议使用者进行点选。
## 热点提示
‘出行助手’所提供的功能之一就是显示附近的[自行车，汽车]租赁点，并引导使用者前往租赁点。这里所做的就是拉取交通工具提供商的各个租赁点所在经纬度，并在地图上进行标注。为了便于使用者查询租赁点剩余的车辆数，我还往里添加了‘点击获取租赁点详情’的功能，就是文字颜色不好选择，这个后期就交给他们的美工慢慢调整吧。
## 支付
既然成为了寻找租赁点的入口，自然要接入租赁支付的功能，这里可以直接调用支付宝的接口，我比较懒，就直接调用了类似于‘支付宝扫码支付’的页面，让使用者直接跳转到支付宝APP进行支付。